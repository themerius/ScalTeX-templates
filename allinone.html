<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>ScalTex Templating</title>
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/typo.css" />
<link rel="stylesheet" href="css/grid.css" />
<script src="https://raw.github.com/janl/mustache.js/master/mustache.js"></script>
</head>
<body>

<div id="main"></div>

<script id="page" type="text/template">
<div class="pageA4">
  <div class="layoutGrid">
    {{{content}}}
  </div>
</div>
</script>

<script id="pagina" type="text/template">
<div class="layoutGridBottom pagina">
  <div class="row line">
    <div class="col3">
      <p>{{institutName}}</p>
    </div>
    <div class="col1 right">
     {{pageNr}}
    </div>
    <div class="row-end">&nbsp;</div>
</div>
</script>

<script id="text_3column" type="text/template">
<div class="row">
	<div class="col3">
		<p>{{{text}}}</p>
	</div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<script id="heading" type="text/template">
<div class="row">
	<div class="col4"><h1>{{number}} {{heading}}</h1></div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<script id="figure_2column_left" type="text/template">
<div class="row topSpace bottomSpace">
	<div class="col2">
		<img class="scaling" src="{{src}}" alt="{{description}}" />
	</div>
	<div class="col1">  <!-- style="margin-top: parentHight - self.hight px" -->
		<strong>Abbildung {{number}}: {{{description}}}</strong>
	</div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<!--
     BEGIN
     =====
-->

<script>
var demo = {
    text: "Lorem <em>ipsum</em> dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.",
    heading: "Ueberschrift",
    number: 1
};

var figData = {
    src: "https://raw.github.com/themerius/ScalTeX/play/public/images/plot.png",
    number: 1,
    description: "Blindtext Bildunterschrift Marginaltext in Marginalspalte </br> Als es die ersten HuÌˆgel des Kursivgebirges"
}

var page = document.getElementById("page").text;
var text = document.getElementById("text_3column").text;
var heading = document.getElementById("heading").text;
var fig = document.getElementById("figure_2column_left").text;
var fig_out = Mustache.render(fig, figData);
var heading_out = Mustache.render(heading, demo);
var text_out = Mustache.render(text, demo);
var page_out = Mustache.render(page, {content: heading_out + text_out + fig_out});
document.getElementById("main").innerHTML = page_out;
</script>
</body>