<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>ScalTex Templating</title>
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/typo.css" />
<link rel="stylesheet" href="css/grid.css" />
<script src="https://raw.github.com/janl/mustache.js/master/mustache.js"></script>
</head>
<body>

<div id="main"></div>

<script id="page" type="text/template">
<div class="pageA4">
  <div class="layoutGrid">
    {{{content}}}
  </div>
</div>
</script>

<script id="pagina" type="text/template">
<div class="layoutGridBottom pagina">
  <div class="row line">
    <div class="col3">
      <p>{{institutName}}</p>
    </div>
    <div class="col1 right">
     <p>{{pageNr}}</p>
    </div>
    <div class="row-end">&nbsp;</div>
</div>
</script>

<script id="text_3column" type="text/template">
<div class="row">
	<div class="col3">
		<p>{{{text}}}</p>
		{{#newline}}
		</br>
		{{/newline}}
	</div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<script id="heading" type="text/template">
<div class="row">
	<div class="col4"><{{h}}>{{number}}</br>{{heading}}</{{h}}></br></br></div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<script id="figure_2column_left" type="text/template">
<div class="row topSpace bottomSpace">
	<div class="col2">
		<img class="scaling" src="{{src}}" alt="{{description}}" />
	</div>
	<div class="col1">  <!-- style="margin-top: parentHight - self.hight px" -->
		<strong>Abbildung {{number}}: {{{description}}}</strong>
	</div>
	<div class="row-end">&nbsp;</div>
</div>
</script>

<!--
     BEGIN
     =====
-->

<script>
var section_1 = {
	heading: "First Heading",
	number: 1,
	h: "h1"
};

var par_1 = {
	text: "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.",
	newline: [true, true]
};

var subsection_1_1 = {
	heading: "Subheading",
	number: 1.1,
	h: "h2"
};

var par_2 = {
	text: "Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."
};

var figData = {
    src: "https://raw.github.com/themerius/ScalTeX/play/public/images/plot.png",
    number: 1,
    description: "Blindtext Bildunterschrift Marginaltext in Marginalspalte </br> Als es die ersten HuÌˆgel des Kursivgebirges"
};

var page = document.getElementById("page").text;
var text = document.getElementById("text_3column").text;
var heading = document.getElementById("heading").text;
var fig = document.getElementById("figure_2column_left").text;

var render = [
	Mustache.render(heading, section_1),
	Mustache.render(text, par_1),
	Mustache.render(heading, subsection_1_1),
	Mustache.render(text, par_2),
	Mustache.render(fig, figData)
];

var assembledPage = Mustache.render(page, {content: render.join("")});

document.getElementById("main").innerHTML = assembledPage;
</script>

</body>